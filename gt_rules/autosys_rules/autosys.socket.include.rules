###############################################################################
#
#	This Include file was generated by Chris Janes of Abilitec with 
#	Bill Shields for Autosys Events being generated by log4x
#
#	Version	Date		Details
#	1.0	15th Sept 2005	Origional
#
###############################################################################

case "65200":
        # Rule set for Autosys events sent via the log4net appender.
	$ruleset =  $ruleset + " - Autosys"
                           	
	@Agent = $Transport
        @Class = $ClassID
        @Summary = $MessageText
        @Stream = $Stream
        $temp_length_location = length($Location)
        if (exists($Location) && int($temp_length_location) > 0)
        {
                @Location = $Location
        }
        @Environment = $Environment
        @Subclass = $Subclass
        @UserData = $Userdata
        @UserInt = $Userint
        @SAPNumber = $SAPnumber

	if (exists($Component))
        {
                @AlertKey = $Component
        }
        else
        {
                @AlertKey = $SAPname
        }

        # Create the AlertGroup field here. Value will change
        # dependant on the presence of $ProcessID token
        @AlertGroup = $EventIdentifier
        if (exists($ProcessID) && int($ProcessID) > 0)
        {
                @AlertGroup = $EventIdentifier + "-" + $ProcessID
        }

#	$classkey = extract(@AlertKey, '^([A-Za-z0-9]+)  \[[0-9]*\].*$')
	$classkey = extract(@AlertKey, '^([A-Za-z0-9_]+)  [0-9]+.*$')
        [$autosysClass, $autosysGID] = lookup($classkey, autosysJobClassGID)
        @Class = $autosysClass
        @OwnerGID = $autosysGID
	$TempDoLookup = 2

        $tempEventType = $EventType
        switch ($tempEventType)
        {
    		case "1":
                 	@Type = $EventType

      		case "2":
                	@Type = 2
        		@Severity = 1
		default:
                 	@Type = $EventType
	}
        


#        $tempIdentifier = @Node + @Manager + $Transport + @AlertGroup + @AlertKey + @Type + $Userdata
        $tempIdentifier = @Node + "SOCKETPROD" + $Transport + @AlertGroup + @AlertKey + @Type + $Userdata
 
